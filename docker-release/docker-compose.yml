version: '2'
services:
    cache:
        image: redis
        networks:
            - back
    
    safelist:
        build: .
            context: ../
            dockerfile: Dockerfile.production   
        networks:
            - back
            - front     
        links:
            - cache
        volumes:
            - pysafe-leveldb:/opt/app/save
            - pysafe-config:/opt/app/conf-files
        ports:
            - "5000:5000"
volumes:
    pysafe-leveldb:
    pysafe-config:
        external: true
networks:
    back:
    front: